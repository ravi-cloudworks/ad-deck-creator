<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Chart Presentation Tool</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <textarea id="editor"></textarea>
    <!-- Customize Button (floating) -->
    <button class="customize-btn" id="customizeBtn" onclick="toggleCustomizeMode()">
        âš™ï¸ Customize
    </button>

    <!-- Main Slide Container (full screen by default) -->
    <div class="slide-container" id="slideContainer">
        <!-- Slides will be dynamically generated here -->
    </div>


    <!-- Control Panel (hidden by default) -->
    <!-- Control Panel (hidden by default) -->
    <div class="control-panel" id="controlPanel">
        <div class="control-header">
            <h2>ğŸ“Š Customize Presentation</h2>
            <button class="close-btn" onclick="toggleCustomizeMode()">âœ•</button>
        </div>
        
        <!-- Tab Navigation -->
        <div class="tab-navigation" id="tabNavigation">
            <button class="tab-btn active" id="chartTab" onclick="switchTab('chart')" style="display: none;">
                ğŸ“Š Chart
            </button>
            <button class="tab-btn" id="videoTab" onclick="switchTab('video')" style="display: none;">
                ğŸ¬ Video
            </button>
            <button class="tab-btn" id="commonTab" onclick="switchTab('common')">
                âš™ï¸ Common
            </button>
        </div>
        
        <div class="control-content">
            
            <!-- Chart Controls Tab -->
            <div class="tab-content active" id="chartTabContent">
                <div class="control-section">
                    <label class="control-label">Chart Type:</label>
                    <div class="chart-type-buttons">
                        <button class="type-btn active" data-type="bar" onclick="selectChartType('bar')">
                            ğŸ“Š Bar Chart
                        </button>
                        <button class="type-btn" data-type="line" onclick="selectChartType('line')">
                            ğŸ“ˆ Line Chart
                        </button>
                        <button class="type-btn" data-type="stack" onclick="selectChartType('stack')">
                            ğŸ“š Stacked
                        </button>
                    </div>
                </div>

                <div class="control-section">
                    <label class="control-label">Chart Data (drag to change):</label>
                    <div class="data-controls" id="dataControls">
                        <!-- Data sliders will be generated here -->
                    </div>
                    <div class="data-management">
                        <div class="data-buttons">
                            <button class="data-btn" onclick="addDataPoint()">â• Add Period</button>
                            <button class="data-btn" onclick="removeDataPoint()">â– Remove Period</button>
                        </div>
                        <div class="data-buttons" id="seriesButtons" style="display: none;">
                            <button class="data-btn" onclick="addSeries()">â• Add Series</button>
                            <button class="data-btn" onclick="removeSeries()">â– Remove Series</button>
                        </div>
                    </div>
                </div>

                <div class="control-section">
                    <label class="control-label">Chart Title:</label>
                    <div class="title-templates">
                        <button class="template-btn" onclick="setTitle('Monthly Sales Data')">ğŸ“Š Monthly Sales</button>
                        <button class="template-btn" onclick="setTitle('Quarterly Revenue')">ğŸ’° Quarterly Revenue</button>
                        <button class="template-btn" onclick="setTitle('Website Traffic')">ğŸŒ Website Traffic</button>
                        <button class="template-btn" onclick="setTitle('Product Performance')">ğŸ“ˆ Product Performance</button>
                        <button class="template-btn" onclick="setTitle('Market Analysis')">ğŸ“‹ Market Analysis</button>
                        <button class="template-btn" onclick="setTitle('Growth Trends')">ğŸ“Š Growth Trends</button>
                    </div>
                    <div class="voice-input-section">
                        <button class="voice-btn" onclick="startVoiceInput('title')">ğŸ¤ Voice Input</button>
                        <span class="voice-status" id="titleVoiceStatus"></span>
                    </div>
                </div>

                <div class="control-section">
                    <label class="control-label">Data Labels:</label>
                    <div class="label-templates">
                        <div class="label-group">
                            <label class="small-label">Series Names:</label>
                            <div class="template-buttons">
                                <button class="template-btn" onclick="setSeriesLabels(['Sales', 'Revenue', 'Profit'])">ğŸ’° Sales/Revenue/Profit</button>
                                <button class="template-btn" onclick="setSeriesLabels(['Visitors', 'Page Views', 'Conversions'])">ğŸŒ Web Analytics</button>
                                <button class="template-btn" onclick="setSeriesLabels(['Q1', 'Q2', 'Q3', 'Q4'])">ğŸ“… Quarterly</button>
                            </div>
                        </div>
                        <div class="label-group">
                            <label class="small-label">Time Periods:</label>
                            <div class="template-buttons">
                                <button class="template-btn" onclick="setTimeLabels(['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'])">ğŸ“… Months</button>
                                <button class="template-btn" onclick="setTimeLabels(['Q1', 'Q2', 'Q3', 'Q4'])">ğŸ“Š Quarters</button>
                                <button class="template-btn" onclick="setTimeLabels(['Week 1', 'Week 2', 'Week 3', 'Week 4'])">ğŸ“† Weeks</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="control-section">
                    <label class="control-label">Chart Colors (tap to change):</label>
                    <div class="color-palette-touch">
                        <!-- Colors will be dynamically generated by JavaScript -->
                    </div>
                </div>
                <div class="control-section">
                    <label class="control-label">Slide Actions:</label>
                    <div class="slide-controls">
                        <button class="slide-btn secondary" onclick="deleteCurrentSlide()">
                            ğŸ—‘ï¸ Delete Current Slide
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Video/Image Controls Tab -->
            <div class="tab-content" id="videoTabContent">
                
                <!-- Edit Current Slide Section (Always Visible) -->
                <div class="control-section">
                    <label class="control-label">âœï¸ Edit Current Slide</label>
                    
                    <div class="edit-content">
                        <!-- Edit Current Video Slide Section -->
                        <div class="accordion-subsection" id="editCurrentVideoSection" style="display: none;">
                            <label class="subsection-label">ğŸ“¹ Edit Video Slide</label>
                            
                            <!-- Video Timeline Preview -->
                            <div class="video-timeline-section">
                                <div class="timeline-preview">
                                    <video id="editTimelinePreview" muted playsinline style="width: 100%; max-height: 80px; border-radius: 12px; background: #000;"></video>
                                    <div class="timeline-info">
                                        <span id="editCurrentTimeDisplay">0:00</span> / <span id="editTotalTimeDisplay">0:00</span>
                                    </div>
                                </div>
                                
                                <!-- Timeline Scrubber -->
                                <div class="timeline-scrubber">
                                    <input type="range" id="editTimelineScrubber" min="0" max="100" value="0" class="timeline-slider">
                                </div>
                            </div>
                            
                            <!-- Edit Segment Controls -->
                            <div class="segment-controls">
                                <div class="segment-time-inputs">
                                    <div class="time-input-group">
                                        <label>Start Time:</label>
                                        <div class="time-display" id="editStartTimeDisplay">0:00</div>
                                        <button class="time-set-btn" onclick="setEditStartTime()">ğŸ“ Set Start</button>
                                    </div>
                                    <div class="time-input-group">
                                        <label>End Time:</label>
                                        <div class="time-display" id="editEndTimeDisplay">0:00</div>
                                        <button class="time-set-btn" onclick="setEditEndTime()">ğŸ Set End</button>
                                    </div>
                                </div>
                                
                                <div class="segment-duration">
                                    Duration: <span id="editSegmentDuration">0s</span>
                                </div>
                            </div>
                            
                            <!-- Update Button -->
                            <div class="video-action-buttons">
                                <button class="video-action-btn primary" onclick="updateVideoSlide()">
                                    âœï¸ Update Video Slide
                                </button>
                            </div>
                        </div>
                        
                        <!-- Edit Current Image Slide Section -->
                        <div class="accordion-subsection" id="editCurrentImageSection" style="display: none;">
                            <label class="subsection-label">ğŸ–¼ï¸ Edit Image Slide</label>
                            
                            <!-- Video Timeline Preview -->
                            <div class="video-timeline-section">
                                <div class="timeline-preview">
                                    <video id="editImageTimelinePreview" muted playsinline style="width: 100%; max-height: 80px; border-radius: 12px; background: #000;"></video>
                                    <div class="timeline-info">
                                        <span id="editImageCurrentTimeDisplay">0:00</span> / <span id="editImageTotalTimeDisplay">0:00</span>
                                    </div>
                                </div>
                                
                                <!-- Timeline Scrubber -->
                                <div class="timeline-scrubber">
                                    <input type="range" id="editImageTimelineScrubber" min="0" max="100" value="0" class="timeline-slider">
                                </div>
                            </div>
                            
                            <!-- Image Frame Controls -->
                            <div class="segment-controls">
                                <div class="image-frame-time">
                                    <label>Frame Time:</label>
                                    <div class="time-display" id="editImageFrameTimeDisplay">0:00</div>
                                    <button class="time-set-btn" onclick="setEditImageFrameTime()">ğŸ–¼ï¸ Set Frame Time</button>
                                </div>
                            </div>
                            
                            <!-- Update Button -->
                            <div class="video-action-buttons">
                                <button class="video-action-btn primary" onclick="updateImageSlide()">
                                    âœï¸ Update Image Slide
                                </button>
                            </div>
                        </div>
                        
                        <!-- No Slide Selected Message -->
                        <div class="no-slide-message" id="noSlideSelected">
                            <p>ğŸ“‹ Select a video or image slide to edit its timing</p>
                        </div>
                    </div>
                </div>
                
     
               
                <div class="control-section">
                    <label class="control-label">Slide Actions:</label>
                    <div class="slide-controls">
                        <button class="slide-btn secondary" onclick="deleteCurrentSlide()">
                            ğŸ—‘ï¸ Delete Current Slide
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Common Controls Tab -->
            <div class="tab-content" id="commonTabContent">
                <div class="control-section">
                    <label class="control-label">Text Color:</label>
                    <div class="text-color-section">
                        <label class="toggle-switch">
                            <input type="checkbox" id="autoTextColor" checked onchange="updateChart()">
                            <span class="slider"></span>
                            <span class="toggle-label">Auto-detect</span>
                        </label>
                        <button class="manual-text-color" id="manualTextBtn" onclick="openTextColorPicker()" disabled>
                            ğŸ¨ Manual Color
                        </button>
                    </div>
                </div>

                <!-- <div class="control-section">
                    <label class="control-label">Background Image:</label>
                    <div class="bg-controls">
                        <button class="bg-btn" onclick="document.getElementById('bgUpload').click()">
                            ğŸ“ Upload Image
                        </button>
                        <button class="bg-btn secondary" onclick="removeBackground()">
                            ğŸ—‘ï¸ Remove
                        </button>
                    </div>
                    <input type="file" id="bgUpload" accept="image/*" style="display: none;">
                </div> -->

                <div class="control-section">
                    <label class="control-label">Slides:</label>
                    <div class="slide-controls">
                        <button class="slide-btn" onclick="addChartSlide()">
                            ğŸ“Š Add Chart Slide
                        </button>
                        <button class="slide-btn" onclick="addVideoSlide()">
                            ğŸ¬ Add Video Slide
                        </button>
                        <button class="slide-btn" onclick="addImageSlide()">
                            ğŸ–¼ï¸ Add Image Slide
                        </button>
                    </div>
                    <div class="slide-counter-big">
                        Slide <span id="currentSlide">1</span> of <span id="totalSlides">1</span>
                    </div>
                    <div class="slide-thumbnails" id="slideList">
                        <!-- Slide thumbnails will be generated here -->
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Navigation (always visible) -->
    <div class="navigation-touch">
        <button class="nav-btn-touch" id="prevBtn" onclick="previousSlide()">â€¹</button>
        <button class="nav-btn-touch" id="nextBtn" onclick="nextSlide()">â€º</button>
    </div>

    <!-- Color Picker Modal for Touch -->
    <div class="color-picker-modal" id="colorPickerModal" style="display: none;">
        <div class="color-picker-content">
            <h3>Choose Color</h3>
            <div class="color-preset-grid">
                <!-- Preset colors for touch - Better organized for iPad -->
                <div class="preset-color" style="background: #FF6B6B" onclick="selectPresetColor('#FF6B6B')"></div>
                <div class="preset-color" style="background: #4ECDC4" onclick="selectPresetColor('#4ECDC4')"></div>
                <div class="preset-color" style="background: #45B7D1" onclick="selectPresetColor('#45B7D1')"></div>
                <div class="preset-color" style="background: #96CEB4" onclick="selectPresetColor('#96CEB4')"></div>
                <div class="preset-color" style="background: #FFEAA7" onclick="selectPresetColor('#FFEAA7')"></div>
                <div class="preset-color" style="background: #DDA0DD" onclick="selectPresetColor('#DDA0DD')"></div>
                <div class="preset-color" style="background: #98D8C8" onclick="selectPresetColor('#98D8C8')"></div>
                <div class="preset-color" style="background: #F7DC6F" onclick="selectPresetColor('#F7DC6F')"></div>
                <div class="preset-color" style="background: #BB8FCE" onclick="selectPresetColor('#BB8FCE')"></div>
                <div class="preset-color" style="background: #333333" onclick="selectPresetColor('#333333')"></div>
                <div class="preset-color" style="background: #FFFFFF; border: 2px solid #ddd;"
                    onclick="selectPresetColor('#FFFFFF')"></div>
                <div class="preset-color" style="background: #000000" onclick="selectPresetColor('#000000')"></div>
                <!-- Additional common colors -->
                <div class="preset-color" style="background: #FF5722" onclick="selectPresetColor('#FF5722')"></div>
                <div class="preset-color" style="background: #9C27B0" onclick="selectPresetColor('#9C27B0')"></div>
                <div class="preset-color" style="background: #3F51B5" onclick="selectPresetColor('#3F51B5')"></div>
                <div class="preset-color" style="background: #2196F3" onclick="selectPresetColor('#2196F3')"></div>
                <div class="preset-color" style="background: #00BCD4" onclick="selectPresetColor('#00BCD4')"></div>
                <div class="preset-color" style="background: #4CAF50" onclick="selectPresetColor('#4CAF50')"></div>
                <div class="preset-color" style="background: #8BC34A" onclick="selectPresetColor('#8BC34A')"></div>
                <div class="preset-color" style="background: #CDDC39" onclick="selectPresetColor('#CDDC39')"></div>
                <div class="preset-color" style="background: #FFC107" onclick="selectPresetColor('#FFC107')"></div>
                <div class="preset-color" style="background: #FF9800" onclick="selectPresetColor('#FF9800')"></div>
                <div class="preset-color" style="background: #795548" onclick="selectPresetColor('#795548')"></div>
                <div class="preset-color" style="background: #607D8B" onclick="selectPresetColor('#607D8B')"></div>
            </div>
            <div style="text-align: center; margin-bottom: 15px;">
                <small style="color: #666;">Choose from the colors above - no need for the tiny picker!</small>
            </div>
            <input type="color" id="touchColorPicker" style="width: 100%; height: 40px; margin: 10px 0;" disabled>
            <div class="color-picker-buttons">
                <button onclick="applySelectedColor()">Apply</button>
                <button onclick="closeColorPicker()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Hidden video element for video slides -->
    <video id="masterVideo" preload="metadata" muted playsinline style="display: none;"></video>

    <script src="script.js"></script>
    <script src="video-slides.js"></script>
    <link rel="stylesheet" href="video-slides.css">
</body>

</html>